# 電動スケボー

## 使うには

- `j_stick_send.ino` と `j_stick_recieve.ino` を Arduino へ書き込む
- 右左折，前後進を行うため**モータードライバが必須です**
  - このプロジェクトでは使わない方法は検討していません


## プログラムの仕様

- 通信方式は**シリアル通信**
- **スティックの状態**(傾き具合) を **縦方向**(上下) と **横方向**(左右) の2種類の値で表す
- **モーターの駆動方法** を `#define F_STRAIGHT 0` のように数値で定義する
- 200[ms] (0.2[sec]) ごとに **スティックの状態**(傾き具合) を取得し，**モーターの駆動方法** を送信する

### 送信側 `j_stick_send.ino`

- スティックの値はアナログ入力  
`LR = analogRead(0);`  
`UD = analogRead(1);`
- スティックの標準値 (原点) は (x, y) = (330, 335) なので，関数により調整

```
int UDOffset(int value){
  return (value - 330);
}
int LROffset(int value){
  return (value - 335);
}
```

- モーターの駆動方法とその閾値，及び送信する値は以下の通り
- これらは y 軸に対する閾値である

|駆動方法|閾値|送信値|
|:-----:|:--:|:---:|
|STOP (停止)|&plusmn;75未満|9|
|S_STRAIGHT (前進 : 低速)|75 以上 175 未満|2|
|D_STRAIGHT (前進 : 通常)|175 以上 275 未満|1|
|F_STRAIGHT (前進 : 高速)|275 以上|0|
|S_BACK (後退 : 低速)|75 以上 175 未満 (負方向)|5|
|D_BACK (後退 : 通常)|175 以上 275 未満 (負方向)|6|
|F_BACK (後退 : 高速)|275 以上 (負方向)|7|

- 直進中に限り右左折のどちらかが可能
- これらは x 軸に対する閾値である

|駆動方法|閾値|送信値|
|:-----:|:--:|:---:|
|RIGHT (右折)|175 以上 (正方向)|3|
|LEFT (左折)|175 以上 (負方向)|4|


### 受信側 `j_stick_recieve.ino`
- 駆動方法を示す値を受信し，それによってモーターパワーを変更する
- モーターパワーはアナログ出力 (255段階)
- モーターパワーは4段階あり，それを以下に示す

|駆動方法|モーターパワー|
|:-----:|:---------:|
|低速|50|
|通常|155|
|高速|255|
|停止|0|

- 右左折はモーターの回転方向を互いに逆になるようにし，旋回をする

---
&copy; Team Final Death-DragonNight
